---
phase: 05-sidebar-and-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/globals.css
  - src/app/page.tsx
  - src/app/layout.tsx
autonomous: false
requirements:
  - SIDE-01
  - SIDE-02
  - SIDE-03

must_haves:
  truths:
    - "The sidebar is a fixed slim ~80px width with icons centered above small text labels"
    - "The active sidebar item shows an amber/orange gradient background and left-edge indicator bar"
    - "Inactive sidebar items show a faint amber hover glow"
    - "The logo is a circular orb with amber-to-orange gradient and breathing pulse glow animation"
    - "The 'Mission Control' text and sidebar toggle button are removed"
    - "A sunset ocean background image is visible behind glass panels with a 50-60% darken overlay"
    - "Ambient orbs still render on top of the background image with drift animations"
    - "All four nav labels (Overview, Clients, Meetings, Tasks) are readable without truncation"
  artifacts:
    - path: "src/app/globals.css"
      provides: "Logo pulse keyframe, body::before/::after background image + overlay, updated sidebar-item height"
      contains: "logo-pulse"
    - path: "src/app/page.tsx"
      provides: "Slim sidebar JSX with icon-above-label layout, no sidebarOpen state, no toggle button"
    - path: "public/assets/bg-sunset.jpg"
      provides: "Background sunset ocean image"
  key_links:
    - from: "src/app/globals.css"
      to: "public/assets/bg-sunset.jpg"
      via: "url('/assets/bg-sunset.jpg') in body::before"
      pattern: "url\\(.*/assets/bg-sunset"
    - from: "src/app/page.tsx"
      to: "src/app/globals.css"
      via: ".sidebar-item.active class triggers ::before indicator bar"
      pattern: "sidebar-item.*active"
    - from: "src/app/page.tsx"
      to: "src/app/globals.css"
      via: ".logo-orb class triggers pulse animation"
      pattern: "logo-orb"
---

<objective>
Restructure the sidebar to a slim icon-above-label layout, add a background sunset image with darken overlay, and convert the logo to a circular pulsing orb.

Purpose: Complete the warm glassmorphism redesign by transforming the sidebar from a wide collapsible layout to a fixed slim vertical format with warm active states, replacing the CSS gradient background with a real sunset ocean image behind glass panels, and making the logo a breathing circular orb.

Output: Fully restructured sidebar in page.tsx, background image CSS in globals.css, logo-pulse animation, user confirmation that image loads correctly.
</objective>

<execution_context>
@/Users/robjames/.claude/get-shit-done/workflows/execute-plan.md
@/Users/robjames/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-sidebar-and-polish/05-RESEARCH.md
@src/app/globals.css
@src/app/page.tsx
@src/app/layout.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add background image CSS and logo-pulse animation to globals.css</name>
  <files>src/app/globals.css</files>
  <action>
Make these changes to globals.css:

**1. Update the `@layer base` body rule** to support the background image. Replace the existing body rule with:

```css
@layer base {
  body {
    background: linear-gradient(135deg, #1a0f00 0%, #2d1a06 50%, #1f1208 100%);
    min-height: 100vh;
    position: relative;
  }

  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: url('/assets/bg-sunset.jpg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    z-index: -2;
  }

  body::after {
    content: '';
    position: fixed;
    inset: 0;
    background: rgba(10, 5, 0, 0.55);
    z-index: -1;
  }
}
```

The existing gradient is preserved as a fallback if the image fails to load. `body::before` holds the image at z-index: -2 (behind everything). `body::after` applies a ~55% darken overlay at z-index: -1. The `.ambient-orbs` wrapper in layout.tsx sits at z-index: 0, and main content at z-index: 1 — so stacking is correct.

**2. Add the logo-pulse keyframe animation** inside `@layer components`, after the existing orb-drift keyframes:

```css
@keyframes logo-pulse {
  0%, 100% {
    box-shadow: 0 0 12px rgba(251, 191, 36, 0.4), 0 0 24px rgba(234, 88, 12, 0.2);
  }
  50% {
    box-shadow: 0 0 22px rgba(251, 191, 36, 0.7), 0 0 44px rgba(234, 88, 12, 0.35);
  }
}

.logo-orb {
  animation: logo-pulse 3.5s ease-in-out infinite;
}
```

**3. Update the `.sidebar-item.active::before` height** from 60% to 70% to better suit the taller icon-above-label button height:

```css
.sidebar-item:hover::before,
.sidebar-item.active::before {
  height: 70%;
}
```

Do NOT touch the `.ambient-orbs`, `.orb`, or orb-drift keyframe rules — those must remain unchanged.
  </action>
  <verify>
    <automated>cd "/Users/robjames/Projects/Mission Control/mission-control" && grep -c "logo-pulse" src/app/globals.css && grep -c "body::before" src/app/globals.css && grep -c "body::after" src/app/globals.css && grep "height: 70%" src/app/globals.css</automated>
    <manual>Confirm globals.css has: body::before with bg-sunset image, body::after with darken overlay, logo-pulse keyframe, and sidebar-item active height 70%</manual>
  </verify>
  <done>globals.css has background image pseudo-elements on body, logo-pulse keyframe animation, and updated sidebar indicator bar height at 70%</done>
</task>

<task type="auto">
  <name>Task 2: Restructure sidebar JSX to slim icon-above-label layout with logo orb</name>
  <files>src/app/page.tsx</files>
  <action>
Make these changes to page.tsx:

**1. Remove unused imports.** Delete `Menu` and `X` from the lucide-react import (they are only used by the toggle button being removed). Keep all other imports.

**2. Remove `sidebarOpen` state.** Delete the line:
```tsx
const [sidebarOpen, setSidebarOpen] = useState(true);
```

**3. Replace the entire `<aside>` block** (sidebar) with the new slim layout. The new sidebar should be:

```tsx
{/* Sidebar */}
<aside className="w-20 bg-[#1a0f00]/80 backdrop-blur-xl border-r border-amber-500/10 flex flex-col">
  {/* Logo */}
  <div className="h-20 flex items-center justify-center border-b border-amber-500/10">
    <div className="w-10 h-10 rounded-full bg-gradient-to-br from-amber-400 to-orange-600 flex items-center justify-center logo-orb">
      <Zap className="w-5 h-5 text-white" />
    </div>
  </div>

  {/* Navigation */}
  <nav className="flex-1 py-6 px-2 space-y-1">
    {tools.map((tool) => {
      const Icon = tool.icon;
      const isActive = activeView === tool.id;
      return (
        <button
          key={tool.id}
          onClick={() => setActiveView(tool.id)}
          className={`w-full flex flex-col items-center py-3 px-1 rounded-xl transition-all duration-300 sidebar-item ${
            isActive
              ? "bg-gradient-to-b from-amber-500/20 to-orange-600/15 text-amber-400 active"
              : "text-slate-400 hover:text-amber-300 hover:bg-amber-500/5"
          }`}
        >
          <Icon className="w-5 h-5" />
          <span className="mt-1 text-[11px] font-medium leading-tight">{tool.name}</span>
        </button>
      );
    })}
  </nav>
</aside>
```

Key changes from current code:
- `w-20` fixed width (no `sidebarOpen` ternary)
- Logo: `rounded-full` (not rounded-xl), `justify-center` (centered), `logo-orb` class (not glow-warm), no "Mission Control" text
- Nav items: `flex-col items-center` (vertical stack, not horizontal), always show `<span>` label (not conditional), 11px font size, `leading-tight`
- Active state: `bg-gradient-to-b` (vertical gradient, not `bg-gradient-to-r`), includes `active` CSS class for the `::before` indicator bar
- Icon wrapper `<div>` with `p-2 rounded-lg` is removed — icon renders directly in the button
- Active dot indicator (`w-1.5 h-1.5 rounded-full bg-amber-400`) is removed
- Entire "Bottom Actions" div with toggle button is removed

**4. Do a full search** for any remaining references to `sidebarOpen` or `setSidebarOpen` in the file and remove them. There should be none after the changes above, but verify.

**5. Verify the file compiles** by running `npx next lint src/app/page.tsx`.
  </action>
  <verify>
    <automated>cd "/Users/robjames/Projects/Mission Control/mission-control" && grep -c "sidebarOpen" src/app/page.tsx && grep -c "logo-orb" src/app/page.tsx && grep -c "flex-col items-center" src/app/page.tsx && npx next lint src/app/page.tsx 2>&1 | tail -5</automated>
    <manual>sidebarOpen count should be 0, logo-orb count should be 1, flex-col items-center count >= 1</manual>
  </verify>
  <done>Sidebar is fixed w-20 with icon-above-label layout, logo is circular with logo-orb class, sidebarOpen state and toggle button are completely removed, Menu/X imports cleaned up, file compiles cleanly</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: User provides background image and verifies it loads</name>
  <files>public/assets/bg-sunset.jpg</files>
  <action>
This is a human-verify checkpoint. Background image CSS infrastructure (body::before with url('/assets/bg-sunset.jpg') and body::after with 55% darken overlay) is in place. The sidebar has been restructured to slim icon-above-label format with logo orb pulse animation. The background image file itself needs to be provided by the user.

Steps for the user:
1. Drop your sunset ocean background image into the project at: `public/assets/bg-sunset.jpg` (create dir if needed: `mkdir -p public/assets`)
2. Start the dev server: `npm run dev`
3. Visit http://localhost:3000
4. Verify: Sunset image visible behind glass panels with warm darken overlay
5. Verify: Ambient orbs (gold, rose, copper) float on top of the image
6. Verify: Glass panels readable with frosted effect over the background
7. Verify: Sidebar is slim (~80px) with icons above small text labels
8. Verify: Logo orb is circular with breathing glow animation
9. Verify: Clicking nav items shows amber indicator bar on the left edge and gradient background
10. Verify: All four labels (Overview, Clients, Meetings, Tasks) are readable, not truncated
  </action>
  <verify>User visually confirms all 10 verification points above</verify>
  <done>Background image loads, sidebar is slim with icon-above-label layout, logo orb pulses, active states show amber indicator bar, all views functional</done>
</task>

</tasks>

<verification>
- `grep -c "sidebarOpen" src/app/page.tsx` returns 0
- `grep -c "logo-orb" src/app/page.tsx` returns 1
- `grep -c "logo-pulse" src/app/globals.css` returns at least 1
- `grep -c "bg-sunset" src/app/globals.css` returns at least 1
- `grep -c "Menu" src/app/page.tsx` returns 0 (import removed)
- `npx next lint src/app/page.tsx` passes
- Background image loads at `/assets/bg-sunset.jpg` (confirmed by user)
- Sidebar renders at fixed ~80px width with vertical icon-above-label layout
</verification>

<success_criteria>
1. Sidebar is fixed width (~80px) with icons centered above small 11px text labels
2. Active nav item shows amber/orange gradient background and left-edge indicator bar
3. Logo is a circular orb with breathing pulse glow (3.5s cycle)
4. "Mission Control" text and sidebar toggle button are completely removed
5. Background image shows through glass panels with darken overlay
6. Ambient orbs render on top of image
7. All four nav labels readable without truncation
8. File compiles with no TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/05-sidebar-and-polish/05-01-SUMMARY.md`
</output>
