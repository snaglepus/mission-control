---
phase: 06-fix-incomplete-design-changes-header-and-nav
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/page.tsx
  - src/app/globals.css
autonomous: false
requirements:
  - MOBILE-01
  - MOBILE-02
  - MOBILE-03
  - MOBILE-04

must_haves:
  truths:
    - "Below 640px the sidebar is hidden and a hamburger icon appears in the header"
    - "Tapping the hamburger opens a full-screen overlay drawer with 4 nav items plus bell and settings icons"
    - "Tapping the backdrop or X button closes the drawer"
    - "Mobile header shows: hamburger + logo orb + compact search + avatar (no name/status, no bell/settings)"
    - "Dashboard stats display in a 2-column grid on mobile with all 4 cards visible"
    - "Welcome heading is text-2xl on mobile, text-4xl on desktop"
    - "Main content padding is p-4 on mobile, p-8 on desktop"
  artifacts:
    - path: "src/app/page.tsx"
      provides: "Mobile drawer, compressed header, responsive dashboard overview"
      contains: "drawerOpen"
    - path: "src/app/globals.css"
      provides: "No new classes needed (pure Tailwind approach) — file unchanged or minimal additions"
  key_links:
    - from: "hamburger button"
      to: "drawerOpen state"
      via: "onClick={() => setDrawerOpen(true)}"
      pattern: "setDrawerOpen\\(true\\)"
    - from: "drawer nav items"
      to: "setActiveView + setDrawerOpen(false)"
      via: "onClick handler closes drawer and switches view"
      pattern: "setActiveView.*setDrawerOpen\\(false\\)"
---

<objective>
Make the main page layout (sidebar, header, dashboard overview) fully responsive for mobile devices below 640px (sm breakpoint).

Purpose: The dashboard currently has no mobile responsiveness — the sidebar, header, and dashboard grid are desktop-only layouts that break on narrow screens. This plan converts the sidebar to a hamburger drawer, compresses the header for mobile, and makes the dashboard overview grid mobile-friendly.

Output: A responsive page.tsx where the sidebar hides on mobile in favor of a full-screen drawer overlay, the header compresses to essential elements, and the dashboard stats/quick actions/activity use mobile-optimized spacing and grid layouts.
</objective>

<execution_context>
@/Users/robjames/.claude/get-shit-done/workflows/execute-plan.md
@/Users/robjames/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-fix-incomplete-design-changes-header-and-nav/06-CONTEXT.md
@.planning/phases/06-fix-incomplete-design-changes-header-and-nav/06-RESEARCH.md
@src/app/page.tsx
@src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Convert sidebar to mobile hamburger drawer and compress header</name>
  <files>src/app/page.tsx</files>
  <action>
**Imports:** Add `Menu` and `X` to the existing lucide-react import statement.

**State:** Add `const [drawerOpen, setDrawerOpen] = useState(false);` to the MissionControl component, after the existing `activeView` state.

**Body scroll lock:** Add a useEffect that toggles `overflow-hidden` on document.body when drawerOpen changes:
```tsx
useEffect(() => {
  if (drawerOpen) {
    document.body.classList.add('overflow-hidden');
  } else {
    document.body.classList.remove('overflow-hidden');
  }
  return () => document.body.classList.remove('overflow-hidden');
}, [drawerOpen]);
```
This requires adding `useEffect` to the React import.

**Sidebar — hide on mobile:**
Change the `<aside>` from:
```
className="w-20 bg-[#1a0f00]/40 backdrop-blur-xl border-r border-amber-500/10 flex flex-col"
```
to:
```
className="hidden sm:flex w-20 bg-[#1a0f00]/40 backdrop-blur-xl border-r border-amber-500/10 flex-col"
```
Note: Remove the bare `flex` and use `hidden sm:flex` pattern. The `flex-col` is safe because it sets flex-direction, not display.

**Header — compress on mobile:**
Change header from `className="h-20 ... px-8"` to `className="h-16 sm:h-20 ... px-4 sm:px-8"`.

Inside the header, restructure the left section:
1. Add a hamburger button visible only on mobile (`sm:hidden`): `<button className="sm:hidden p-2 rounded-xl text-slate-400 hover:text-white mr-3" onClick={() => setDrawerOpen(true)}><Menu className="w-6 h-6" /></button>`
2. Add a logo orb visible only on mobile (`sm:hidden`): `<div className="sm:hidden w-8 h-8 rounded-full bg-gradient-to-br from-amber-400 to-orange-600 flex items-center justify-center logo-orb mr-3"><Zap className="w-4 h-4 text-white" /></div>`
3. Wrap the existing desktop search bar with `hidden sm:block` on its container div (the `<div className="relative w-full">`)
4. Add a compact mobile search bar (`sm:hidden`, smaller padding/icon, placeholder "Search...")

For the right side of header:
1. Bell button: add `hidden sm:block` — hidden on mobile (moves to drawer)
2. Settings button: add `hidden sm:block` — hidden on mobile (moves to drawer)
3. User name/status `<div className="text-right">`: add `hidden sm:block`
4. Avatar: change sizing from `w-10 h-10` to `w-8 h-8 sm:w-10 sm:h-10` and text from `text-sm` to `text-xs sm:text-sm`
5. User section wrapper: change `space-x-3 pl-4` to `space-x-2 sm:space-x-3 pl-2 sm:pl-4`

**Mobile drawer overlay:**
Add after the closing `</div>` of the main content area (before the outer wrapper's closing `</div>`), a conditional drawer block:
```tsx
{drawerOpen && (
  <div className="fixed inset-0 z-50 sm:hidden">
    {/* Dark backdrop */}
    <div
      className="absolute inset-0 bg-black/70 backdrop-blur-sm"
      onClick={() => setDrawerOpen(false)}
    />
    {/* Drawer panel */}
    <div className="absolute inset-0 bg-[#1a0f00]/95 flex flex-col">
      {/* Close button + logo header */}
      <div className="h-16 flex items-center justify-between px-6 border-b border-amber-500/10">
        <div className="flex items-center space-x-3">
          <div className="w-9 h-9 rounded-full bg-gradient-to-br from-amber-400 to-orange-600 flex items-center justify-center logo-orb">
            <Zap className="w-4 h-4 text-white" />
          </div>
        </div>
        <button onClick={() => setDrawerOpen(false)} className="p-2 rounded-xl text-slate-400 hover:text-white transition-all">
          <X className="w-6 h-6" />
        </button>
      </div>
      {/* Nav items */}
      <nav className="flex-1 py-6 px-4 space-y-2">
        {tools.map((tool) => {
          const Icon = tool.icon;
          const isActive = activeView === tool.id;
          return (
            <button
              key={tool.id}
              onClick={() => { setActiveView(tool.id); setDrawerOpen(false); }}
              className={`w-full flex items-center py-4 px-4 rounded-xl transition-all duration-200 ${
                isActive
                  ? "bg-gradient-to-r from-amber-500/20 to-orange-600/15 text-amber-400"
                  : "text-slate-400 hover:text-amber-300 hover:bg-amber-500/5"
              }`}
            >
              <Icon className="w-5 h-5 mr-3" />
              <span className="text-base font-medium">{tool.name}</span>
            </button>
          );
        })}
      </nav>
      {/* Bell + Settings at bottom */}
      <div className="px-4 pb-8 flex items-center space-x-4 border-t border-amber-500/10 pt-6">
        <button className="relative p-3 rounded-xl text-slate-400 hover:bg-white/5 transition-all">
          <Bell className="w-5 h-5" />
          <span className="absolute top-2 right-2 w-2 h-2 bg-gradient-to-r from-amber-400 to-orange-500 rounded-full animate-pulse" />
        </button>
        <button className="p-3 rounded-xl text-slate-400 hover:bg-white/5 transition-all">
          <Settings className="w-5 h-5" />
        </button>
      </div>
    </div>
  </div>
)}
```

Note: Use `bg-[#1a0f00]/95` on the drawer panel (NOT backdrop-filter) to avoid iOS Safari compositing issues with stacked backdrop-filter elements (see RESEARCH.md Pitfall 2). The high opacity makes the panel effectively opaque.

**Main content padding:**
Change `<main className="flex-1 overflow-auto p-8">` to `<main className="flex-1 overflow-auto p-4 sm:p-8">`.
  </action>
  <verify>
    <automated>cd "/Users/robjames/Projects/Mission Control/mission-control" && npx next build 2>&1 | tail -5</automated>
    <manual>Resize browser to below 640px — sidebar should be hidden, hamburger visible, header compact</manual>
  </verify>
  <done>Sidebar hidden on mobile with hamburger drawer overlay, header compressed to essential elements, main content padding responsive. Build passes with no errors.</done>
</task>

<task type="auto">
  <name>Task 2: Make dashboard overview responsive for mobile</name>
  <files>src/app/page.tsx</files>
  <action>
In the `DashboardOverview` component within page.tsx, apply these responsive changes:

**Welcome heading:**
Change `className="text-4xl font-bold text-white mb-2"` to `className="text-2xl sm:text-4xl font-bold text-white mb-2"`.

Also reduce subtitle: change `text-lg` to `text-base sm:text-lg` on the mission overview paragraph.

**Stats grid:**
Change from `grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6` to `grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6`.
This gives 2-column on mobile (user decision), 4-column on large screens.

**Stat cards:**
Change each stat card's padding from `p-6` to `p-4 sm:p-6`.
Change stat icon container from `w-12 h-12` to `w-10 h-10 sm:w-12 sm:h-12`.
Change stat icon from `w-6 h-6` to `w-5 h-5 sm:w-6 sm:h-6`.
Change stat value from `text-3xl` to `text-2xl sm:text-3xl`.

**Quick actions grid:**
Change from `grid grid-cols-1 md:grid-cols-3 gap-6` to `grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6`.
Change quick action card padding from `p-6` to `p-4 sm:p-6`.
Change quick action icon container from `w-14 h-14` to `w-12 h-12 sm:w-14 sm:h-14`.
Change quick action icon from `w-7 h-7` to `w-6 h-6 sm:w-7 sm:h-7`.

**Recent Activity card:**
Change from `p-6` to `p-4 sm:p-6`.
Change the inner `mb-6` to `mb-4 sm:mb-6`.

**Section spacing:**
Change the outer `space-y-8` to `space-y-6 sm:space-y-8`.
  </action>
  <verify>
    <automated>cd "/Users/robjames/Projects/Mission Control/mission-control" && npx next build 2>&1 | tail -5</automated>
    <manual>At 640px or below: stats show 2 columns, heading is smaller, card padding tighter</manual>
  </verify>
  <done>Dashboard overview responsive — 2-column stats grid on mobile, reduced heading/padding/icon sizes, all 4 stats visible without scrolling on mobile. Build passes.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Visual verification of mobile layout</name>
  <files>src/app/page.tsx</files>
  <action>
No code changes — this is a visual verification checkpoint.

What was built: Mobile-responsive sidebar-to-drawer conversion, compressed header, and responsive dashboard overview. The sidebar hides below 640px, a hamburger icon opens a full-screen drawer, the header shows only essential elements on mobile, and dashboard stats display in a 2-column grid.

How to verify:
1. Open the app in Chrome and open DevTools (F12)
2. Toggle device toolbar (Ctrl+Shift+M) and select iPhone 14 (390px) or similar
3. Verify:
   - Sidebar is hidden — no left panel visible
   - Header shows: hamburger icon | logo orb | search bar | avatar (no name, no bell, no settings)
   - Welcome heading is smaller (text-2xl)
   - Stats grid shows 2 columns (2x2 layout), all 4 cards visible
   - Card padding is tighter than desktop
4. Tap the hamburger icon:
   - Full-screen dark overlay appears
   - Drawer panel shows logo orb + X close button at top
   - 4 nav items listed vertically (Overview, Clients, Meetings, Tasks)
   - Bell and Settings icons at bottom of drawer
5. Tap a nav item — drawer closes and view switches
6. Tap the backdrop — drawer closes
7. Switch to desktop width (>640px) — sidebar reappears, header expands, stats show 4 columns

Resume signal: Type "approved" or describe issues to fix
  </action>
  <verify>User visual approval of mobile layout at 390px width</verify>
  <done>User has approved the mobile sidebar drawer, compressed header, and responsive dashboard overview layout</done>
</task>

</tasks>

<verification>
- `npx next build` completes with zero errors
- Below 640px: sidebar hidden, hamburger drawer functional, header compressed
- Above 640px: layout unchanged from Phase 5 result
- Drawer opens/closes, nav items work, body scroll locked when open
- Stats grid shows 2 columns on mobile, 4 on desktop
</verification>

<success_criteria>
- Mobile layout is usable at 390px width (iPhone 14)
- Hamburger drawer contains all navigation + bell/settings
- Header shows only essential elements on mobile
- Dashboard stats 2-column grid with tighter spacing
- Desktop layout completely unchanged
- Build passes with no TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/06-fix-incomplete-design-changes-header-and-nav/06-01-SUMMARY.md`
</output>
